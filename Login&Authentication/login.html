<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All-In-One WFHMS Login Page</title>
    <link rel="stylesheet" href="login.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
</head>
<body>
    <img src="../Images/wfhman.jpg" alt="">
    <div id="app" class="container">
        <form @submit.prevent="login">
            <h1>All-In-One</h1>
            <h3>WFH Management System</h3>
            <div class="input-box">
                <input v-model="staffID" type="text" placeholder="Enter your StaffID">
                <i class='bx bx-briefcase'></i>
            </div>
            <button class="btn" type="submit">Login</button>
        </form>
    </div>

    <script>

        fetch('http://localhost:5000/data')
        .then(response => response.json())
        .then(returnedJSON => {
            console.log(returnedJSON);
            console.log(returnedJSON.data[0]);
            dataArr = returnedJSON.data;
        })
        .catch(error => console.error('Error fetching data:', error));

        new Vue({
            el: '#app',
            data: {
                staffID: ''
            },
            methods: {
                checkId(id,arr) {
                    for (let i = 0; i < arr.length; i++) {
                        if (id == arr[i][0]) {
                            return 1
                        }
                    }
                    return 0
                },
                login() {
                    if (this.checkId(this.staffID,dataArr)) {
                        window.location.href = '../Home/home.html';
                    } else {
                        alert('Please enter your StaffID');
                    }
                }

            },
            computed: {

            },

            

        });
    </script>
    <script src="https://unpkg.com/vue@3.2.47/dist/vue.global.js"></script>
</body>
</html>
